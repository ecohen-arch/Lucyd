{{- 'section-loyalty-okendo-widget.css' | asset_url | stylesheet_tag -}}

{%- style -%}
  #shopify-section-{{ section.id }} > div {
    padding-block-start: calc(var(--section-spacing-unit-size) * {{ section.settings.spacing_top }});
    padding-block-end: calc(var(--section-spacing-unit-size) * {{ section.settings.spacing_bottom }});
  }
{%- endstyle -%}

<div class="loyalty-okendo-widget color-{{ section.settings.color_scheme }} gradient">
  <div class="container {{ section.settings.section_width }}">
    {%- if section.settings.heading != blank -%}
      <h2 class="section__heading {{ section.settings.heading_size }}">
        {{- section.settings.heading -}}
      </h2>
    {%- endif -%}

    {%- if section.settings.subheading != blank -%}
      <p class="loyalty-okendo-widget__subheading">{{ section.settings.subheading }}</p>
    {%- endif -%}

    <div class="loyalty-okendo-widget__container">
      {%- if section.settings.custom_html != blank -%}
        {{ section.settings.custom_html }}
      {%- else -%}
        <div id="okendo-loyalty-rewards-widget"></div>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Loyalty Okendo Widget",
  "tag": "section",
  "class": "section-loyalty-okendo-widget",
  "limit": 1,
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "YOUR REWARDS"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Log in to view your points balance, redeem rewards, and track your tier status."
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h6", "label": "XS" },
        { "value": "h5", "label": "S" },
        { "value": "h4", "label": "M" },
        { "value": "h3", "label": "L" },
        { "value": "h2", "label": "XL" }
      ],
      "default": "h3"
    },
    {
      "type": "html",
      "id": "custom_html",
      "label": "Custom embed code",
      "info": "Override the default Okendo widget with custom HTML. Leave blank to use the default widget container."
    },
    {
      "type": "header",
      "content": "Section settings"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        { "value": "max-w-page", "label": "Page" },
        { "value": "max-w-narrower", "label": "Narrower" },
        { "value": "max-w-fluid", "label": "Full width" }
      ],
      "default": "max-w-page"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-6"
    },
    {
      "type": "select",
      "id": "spacing_top",
      "label": "Top spacing",
      "options": [
        { "value": "0", "label": "No" },
        { "value": "1", "label": "S" },
        { "value": "2", "label": "M" },
        { "value": "4", "label": "L" },
        { "value": "6", "label": "XL" }
      ],
      "default": "2"
    },
    {
      "type": "select",
      "id": "spacing_bottom",
      "label": "Bottom spacing",
      "options": [
        { "value": "0", "label": "No" },
        { "value": "1", "label": "S" },
        { "value": "2", "label": "M" },
        { "value": "4", "label": "L" },
        { "value": "6", "label": "XL" }
      ],
      "default": "4"
    }
  ],
  "presets": [
    {
      "name": "Loyalty Okendo Widget",
      "settings": {
        "heading": "YOUR REWARDS",
        "subheading": "Log in to view your points balance, redeem rewards, and track your tier status.",
        "heading_size": "h3",
        "section_width": "max-w-page",
        "color_scheme": "scheme-6",
        "spacing_top": "2",
        "spacing_bottom": "4"
      }
    }
  ]
}
{% endschema %}
